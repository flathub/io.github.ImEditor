From d558690bbfd9f10ad70967d94b912afcd84c7331 Mon Sep 17 00:00:00 2001
From: Hugo Posnic <hugo.posnic@gmail.com>
Date: Mon, 5 Aug 2019 22:31:34 +0200
Subject: [PATCH 1/1] Fix translatations

---
 po/fr.po            | 98 ++++++++++++++++++++++-----------------------
 po/imeditor.pot     | 96 ++++++++++++++++++++++----------------------
 src/imeditor.in     |  2 +
 src/ui/headerbar.ui |  2 +-
 src/ui/menu.ui      |  2 +-
 src/ui/shortcuts.ui |  2 +-
 src/ui/window.ui    |  2 +-
 7 files changed, 103 insertions(+), 101 deletions(-)

diff --git a/po/fr.po b/po/fr.po
index cdb67ae..295dd2a 100644
--- a/po/fr.po
+++ b/po/fr.po
@@ -7,8 +7,8 @@ msgid ""
 msgstr ""
 "Project-Id-Version: imeditor\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2019-08-04 15:32+0200\n"
-"PO-Revision-Date: 2019-08-04 15:33+0200\n"
+"POT-Creation-Date: 2019-08-05 19:58+0200\n"
+"PO-Revision-Date: 2019-08-05 20:00+0200\n"
 "Last-Translator: Hugo Posnic <hugo.posnic@gmail.com>\n"
 "Language-Team: \n"
 "Language: fr\n"
@@ -68,15 +68,47 @@ msgstr "Créer une nouvelle image"
 msgid "Open an existing image"
 msgstr "Ouvrir une image existante"
 
-#: src/ui/headerbar.ui:8 src/interface/tab.py:53
+#: src/ui/headerbar.ui:18 src/interface/tab.py:53
 msgid "Pencil"
 msgstr "Crayon"
 
-#: src/ui/headerbar.ui:20 src/interface/window.py:417
+#: src/ui/headerbar.ui:60 src/interface/window.py:407
 msgid "Simple & versatile image editor"
 msgstr "Éditeur d'images simple et polyvalent"
 
-#: src/ui/headerbar.ui:59
+#: src/ui/headerbar.ui:71
+msgid "New"
+msgstr "Nouveau"
+
+#: src/ui/headerbar.ui:87
+msgid "Open"
+msgstr "Ouvrir"
+
+#: src/ui/headerbar.ui:103 src/ui/shortcuts.ui:63
+msgid "Save"
+msgstr "Sauvegarder"
+
+#: src/ui/headerbar.ui:119 src/ui/shortcuts.ui:70
+msgid "Save as"
+msgstr "Sauvegarder sous"
+
+#: src/ui/headerbar.ui:135 src/ui/shortcuts.ui:83
+msgid "Undo"
+msgstr "Annuler"
+
+#: src/ui/headerbar.ui:151 src/ui/shortcuts.ui:90
+msgid "Redo"
+msgstr "Rétablir"
+
+#: src/ui/headerbar.ui:167 src/ui/menu.ui:73
+msgid "Rotate -90°"
+msgstr "Rotation -90°"
+
+#: src/ui/headerbar.ui:183 src/ui/menu.ui:77
+msgid "Rotate 90°"
+msgstr "Rotation +90°"
+
+#: src/ui/headerbar.ui:240
 msgid "Selection"
 msgstr "Sélection"
 
@@ -136,14 +168,6 @@ msgstr "Luminosité"
 msgid "Operations"
 msgstr "Opérations"
 
-#: src/ui/menu.ui:73 src/interface/headerbar.py:79
-msgid "Rotate -90°"
-msgstr "Rotation -90°"
-
-#: src/ui/menu.ui:77 src/interface/headerbar.py:86
-msgid "Rotate 90°"
-msgstr "Rotation +90°"
-
 #: src/ui/menu.ui:81
 msgid "Horizontal mirror"
 msgstr "Miroir horizontal"
@@ -188,74 +212,50 @@ msgstr "Image"
 msgid "Close an image"
 msgstr "Fermer une image"
 
-#: src/ui/shortcuts.ui:63 src/interface/headerbar.py:51
-msgid "Save"
-msgstr "Sauvegarder"
-
-#: src/ui/shortcuts.ui:70 src/interface/headerbar.py:58
-msgid "Save as"
-msgstr "Sauvegarder sous"
-
 #: src/ui/shortcuts.ui:78
 msgid "Edition"
 msgstr "Édition"
 
-#: src/ui/shortcuts.ui:83 src/interface/headerbar.py:65
-msgid "Undo"
-msgstr "Annuler"
-
-#: src/ui/shortcuts.ui:90 src/interface/headerbar.py:72
-msgid "Redo"
-msgstr "Rétablir"
-
-#: src/interface/window.py:259 src/interface/dialog.py:136
+#: src/interface/window.py:263 src/interface/dialog.py:136
 msgid "untitled"
 msgstr "sans-titre"
 
-#: src/interface/window.py:272 src/interface/window.py:282
+#: src/interface/window.py:276 src/interface/window.py:286
 msgid "Unable to open this image"
 msgstr "Impossible d'ouvrir cette image"
 
-#: src/interface/window.py:273
+#: src/interface/window.py:277
 msgid "This image doesn't exists. Please verify the path."
 msgstr "Cette image n'existe pas. Veuillez vérifier le chemin."
 
-#: src/interface/window.py:283
+#: src/interface/window.py:287
 msgid "The mode of this image is not supported."
 msgstr "Le mode de cette image n'est pas supporté."
 
-#: src/interface/window.py:285
+#: src/interface/window.py:289
 msgid "Unable to open this file"
 msgstr "Impossible d'ouvrir ce fichier"
 
-#: src/interface/window.py:286
+#: src/interface/window.py:290
 msgid "The format of this file is not supported."
 msgstr "Le format de ce fichier n'est pas supporté."
 
-#: src/interface/window.py:288
+#: src/interface/window.py:292
 msgid "Already open"
 msgstr "Déjà ouvert"
 
-#: src/interface/window.py:289
+#: src/interface/window.py:293
 msgid "This image is already opened in ImEditor."
 msgstr "Cette image est déjà ouverte dans ImEditor."
 
-#: src/interface/window.py:318
+#: src/interface/window.py:322
 msgid "There are unsaved changes to this image"
 msgstr "Des changements sur l'image n'ont pas été sauvegardés."
 
-#: src/interface/window.py:419
+#: src/interface/window.py:409
 msgid "Distributed under the GNU GPL(v3) license.\n"
 msgstr "Distribué sous la licence GNU GPL(v3).\n"
 
-#: src/interface/headerbar.py:37
-msgid "New"
-msgstr "Nouveau"
-
-#: src/interface/headerbar.py:44
-msgid "Open"
-msgstr "Ouvrir"
-
 #: src/interface/dialog.py:54 src/interface/dialog.py:165
 msgid "Cancel"
 msgstr "Annuler"
@@ -340,11 +340,11 @@ msgstr "Format"
 msgid "Shape"
 msgstr "Forme"
 
-#: src/interface/tab.py:57
+#: src/interface/tab.py:57 src/interface/tab.py:184
 msgid "Ellipse"
 msgstr "Ellipse"
 
-#: src/interface/tab.py:57
+#: src/interface/tab.py:57 src/interface/tab.py:186
 msgid "Square"
 msgstr "Carré"
 
diff --git a/po/imeditor.pot b/po/imeditor.pot
index aecf931..8dd9709 100644
--- a/po/imeditor.pot
+++ b/po/imeditor.pot
@@ -8,7 +8,7 @@ msgid ""
 msgstr ""
 "Project-Id-Version: imeditor\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2019-08-04 15:32+0200\n"
+"POT-Creation-Date: 2019-08-05 22:28+0200\n"
 "PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
 "Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
 "Language-Team: LANGUAGE <LL@li.org>\n"
@@ -65,15 +65,47 @@ msgstr ""
 msgid "Open an existing image"
 msgstr ""
 
-#: src/ui/headerbar.ui:8 src/interface/tab.py:53
+#: src/ui/headerbar.ui:18 src/interface/tab.py:53
 msgid "Pencil"
 msgstr ""
 
-#: src/ui/headerbar.ui:20 src/interface/window.py:417
+#: src/ui/headerbar.ui:60 src/interface/window.py:407
 msgid "Simple & versatile image editor"
 msgstr ""
 
-#: src/ui/headerbar.ui:59
+#: src/ui/headerbar.ui:71
+msgid "New"
+msgstr ""
+
+#: src/ui/headerbar.ui:87
+msgid "Open"
+msgstr ""
+
+#: src/ui/headerbar.ui:103 src/ui/shortcuts.ui:63
+msgid "Save"
+msgstr ""
+
+#: src/ui/headerbar.ui:119 src/ui/shortcuts.ui:70
+msgid "Save as"
+msgstr ""
+
+#: src/ui/headerbar.ui:135 src/ui/shortcuts.ui:83
+msgid "Undo"
+msgstr ""
+
+#: src/ui/headerbar.ui:151 src/ui/shortcuts.ui:90
+msgid "Redo"
+msgstr ""
+
+#: src/ui/headerbar.ui:167 src/ui/menu.ui:73
+msgid "Rotate -90°"
+msgstr ""
+
+#: src/ui/headerbar.ui:183 src/ui/menu.ui:77
+msgid "Rotate 90°"
+msgstr ""
+
+#: src/ui/headerbar.ui:240
 msgid "Selection"
 msgstr ""
 
@@ -133,14 +165,6 @@ msgstr ""
 msgid "Operations"
 msgstr ""
 
-#: src/ui/menu.ui:73 src/interface/headerbar.py:79
-msgid "Rotate -90°"
-msgstr ""
-
-#: src/ui/menu.ui:77 src/interface/headerbar.py:86
-msgid "Rotate 90°"
-msgstr ""
-
 #: src/ui/menu.ui:81
 msgid "Horizontal mirror"
 msgstr ""
@@ -185,74 +209,50 @@ msgstr ""
 msgid "Close an image"
 msgstr ""
 
-#: src/ui/shortcuts.ui:63 src/interface/headerbar.py:51
-msgid "Save"
-msgstr ""
-
-#: src/ui/shortcuts.ui:70 src/interface/headerbar.py:58
-msgid "Save as"
-msgstr ""
-
 #: src/ui/shortcuts.ui:78
 msgid "Edition"
 msgstr ""
 
-#: src/ui/shortcuts.ui:83 src/interface/headerbar.py:65
-msgid "Undo"
-msgstr ""
-
-#: src/ui/shortcuts.ui:90 src/interface/headerbar.py:72
-msgid "Redo"
-msgstr ""
-
-#: src/interface/window.py:259 src/interface/dialog.py:136
+#: src/interface/window.py:263 src/interface/dialog.py:136
 msgid "untitled"
 msgstr ""
 
-#: src/interface/window.py:272 src/interface/window.py:282
+#: src/interface/window.py:276 src/interface/window.py:286
 msgid "Unable to open this image"
 msgstr ""
 
-#: src/interface/window.py:273
+#: src/interface/window.py:277
 msgid "This image doesn't exists. Please verify the path."
 msgstr ""
 
-#: src/interface/window.py:283
+#: src/interface/window.py:287
 msgid "The mode of this image is not supported."
 msgstr ""
 
-#: src/interface/window.py:285
+#: src/interface/window.py:289
 msgid "Unable to open this file"
 msgstr ""
 
-#: src/interface/window.py:286
+#: src/interface/window.py:290
 msgid "The format of this file is not supported."
 msgstr ""
 
-#: src/interface/window.py:288
+#: src/interface/window.py:292
 msgid "Already open"
 msgstr ""
 
-#: src/interface/window.py:289
+#: src/interface/window.py:293
 msgid "This image is already opened in ImEditor."
 msgstr ""
 
-#: src/interface/window.py:318
+#: src/interface/window.py:322
 msgid "There are unsaved changes to this image"
 msgstr ""
 
-#: src/interface/window.py:419
+#: src/interface/window.py:409
 msgid "Distributed under the GNU GPL(v3) license.\n"
 msgstr ""
 
-#: src/interface/headerbar.py:37
-msgid "New"
-msgstr ""
-
-#: src/interface/headerbar.py:44
-msgid "Open"
-msgstr ""
-
 #: src/interface/dialog.py:54 src/interface/dialog.py:165
 msgid "Cancel"
 msgstr ""
@@ -337,11 +337,11 @@ msgstr ""
 msgid "Shape"
 msgstr ""
 
-#: src/interface/tab.py:57
+#: src/interface/tab.py:57 src/interface/tab.py:184
 msgid "Ellipse"
 msgstr ""
 
-#: src/interface/tab.py:57
+#: src/interface/tab.py:57 src/interface/tab.py:186
 msgid "Square"
 msgstr ""
 
diff --git a/src/imeditor.in b/src/imeditor.in
index 87f2ac1..beb360f 100755
--- a/src/imeditor.in
+++ b/src/imeditor.in
@@ -21,10 +21,12 @@ import os
 import sys
 import signal
 import gettext
+import locale
 
 VERSION = '@VERSION@'
 pkgdatadir = '@pkgdatadir@'
 localedir = '@localedir@'
+locale.bindtextdomain('imeditor', localedir)
 
 sys.path.insert(1, pkgdatadir)
 signal.signal(signal.SIGINT, signal.SIG_DFL)
diff --git a/src/ui/headerbar.ui b/src/ui/headerbar.ui
index e0d27cf..58c5bc9 100644
--- a/src/ui/headerbar.ui
+++ b/src/ui/headerbar.ui
@@ -1,6 +1,6 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <!-- Generated with glade 3.22.1 -->
-<interface>
+<interface domain="imeditor">
   <requires lib="gtk+" version="3.20"/>
   <object class="GtkImage" id="new_image">
     <property name="visible">True</property>
diff --git a/src/ui/menu.ui b/src/ui/menu.ui
index 1e22457..7f26a9c 100644
--- a/src/ui/menu.ui
+++ b/src/ui/menu.ui
@@ -1,5 +1,5 @@
 <?xml version="1.0"?>
-<interface>
+<interface domain="imeditor">
   <menu id="window-menu">
     <section>
       <attribute name="display-hint">horizontal-buttons</attribute>
diff --git a/src/ui/shortcuts.ui b/src/ui/shortcuts.ui
index cc8fe8f..17b5ef9 100644
--- a/src/ui/shortcuts.ui
+++ b/src/ui/shortcuts.ui
@@ -1,5 +1,5 @@
 <?xml version="1.0"?>
-<interface>
+<interface domain="imeditor">
   <object class="GtkShortcutsWindow" id="shortcuts-window">
     <child>
       <object class="GtkShortcutsSection">
diff --git a/src/ui/window.ui b/src/ui/window.ui
index bf61b73..46da171 100644
--- a/src/ui/window.ui
+++ b/src/ui/window.ui
@@ -1,6 +1,6 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <!-- Generated with glade 3.22.1 -->
-<interface>
+<interface domain="imeditor">
   <requires lib="gtk+" version="3.20"/>
   <object class="GtkImage" id="new-image">
     <property name="visible">True</property>
-- 
2.21.0

